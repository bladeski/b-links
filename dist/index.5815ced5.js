function e(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}function s(s){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){e(s,t,r[t])}))}return s}class t{updatePref(e,t){const n=s({},this.currentPrefs);switch(n[e]=t,this.savePrefs(n),e){case"showPreferences":this.showPreferences(n.showPreferences);break;case"showDyslexicStyles":this.enableStyles(r.DYSLEXIC_STYLES,n.showDyslexicStyles);break;case"showEnhancedStyles":this.enableStyles(r.ENHANCED_STYLES,n.showEnhancedStyles)}}getPrefs(){const e=s({},this.prefDefaults);return Object.keys(this.prefDefaults).forEach((s=>{const t=localStorage.getItem(s);e[s]=null!==t?"true"===t:this.prefDefaults[s]})),e}savePrefs(e){Object.keys(e).forEach((s=>{"showPreferences"!==s&&localStorage.setItem(s,`${e[s]}`)})),this.currentPrefs=e}initialiseForm(){var e;const s=this.getPrefs(),t=null===(e=this.preferenceForm)||void 0===e?void 0:e.querySelector('[name="showDyslexicStyles"]');t.checked=s.showDyslexicStyles,t.addEventListener("click",(e=>{var s;this.updatePref("showDyslexicStyles",null===(s=e.target)||void 0===s?void 0:s.checked)})),performance.mark("Loaded settings")}showPreferences(e){var s,t;e?null===(s=this.preferenceForm)||void 0===s||s.classList.remove("hide"):null===(t=this.preferenceForm)||void 0===t||t.classList.add("hide")}enableStyles(e,s){document.getElementById(e).disabled=!s}constructor(){e(this,"prefDefaults",{showPreferences:!1,showDyslexicStyles:!1,showEnhancedStyles:!1}),e(this,"preferenceForm",document.forms.namedItem("Preferences")),performance.mark("Loading settings"),this.currentPrefs=this.getPrefs(),this.enableStyles(r.DYSLEXIC_STYLES,this.currentPrefs.showDyslexicStyles),this.enableStyles(r.ENHANCED_STYLES,this.currentPrefs.showEnhancedStyles);const s=document.getElementById("Settings");s.disabled=!1,s.ariaLabel="View settings.",s.addEventListener("click",(()=>{this.updatePref("showPreferences",!this.currentPrefs.showPreferences)})),this.initialiseForm()}}let r;var n;(n=r||(r={})).DYSLEXIC_STYLES="DyslexicStyles",n.ENHANCED_STYLES="EnhancedStyles",window.onload=()=>{performance.mark("Start app"),console.log("You're running JavaScript... let's have some fun!");new t};