!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){r(e,t,n[t])}))}return e}var s,i,c=function(){"use strict";function i(){var t=this;e(this,i),r(this,"prefDefaults",{showPreferences:!1,showDyslexicStyles:!1,showEnhancedStyles:!1}),r(this,"preferenceForm",document.forms.namedItem("Preferences")),performance.mark("Loading settings"),this.currentPrefs=this.getPrefs(),this.enableStyles(s.DYSLEXIC_STYLES,this.currentPrefs.showDyslexicStyles),this.enableStyles(s.ENHANCED_STYLES,this.currentPrefs.showEnhancedStyles);var n=document.getElementById("Settings");n.disabled=!1,n.ariaLabel="View settings.",n.addEventListener("click",(function(){t.updatePref("showPreferences",!t.currentPrefs.showPreferences)})),this.initialiseForm()}var c,o,a;return c=i,(o=[{key:"updatePref",value:function(e,t){var r=n({},this.currentPrefs);switch(r[e]=t,this.savePrefs(r),e){case"showPreferences":this.showPreferences(r.showPreferences);break;case"showDyslexicStyles":this.enableStyles(s.DYSLEXIC_STYLES,r.showDyslexicStyles);break;case"showEnhancedStyles":this.enableStyles(s.ENHANCED_STYLES,r.showEnhancedStyles)}}},{key:"getPrefs",value:function(){var e=this,t=n({},this.prefDefaults);return Object.keys(this.prefDefaults).forEach((function(r){var n=localStorage.getItem(r);t[r]=null!==n?"true"===n:e.prefDefaults[r]})),t}},{key:"savePrefs",value:function(e){Object.keys(e).forEach((function(t){"showPreferences"!==t&&localStorage.setItem(t,"".concat(e[t]))})),this.currentPrefs=e}},{key:"initialiseForm",value:function(){var e,t=this,r=this.getPrefs(),n=null===(e=this.preferenceForm)||void 0===e?void 0:e.querySelector('[name="showDyslexicStyles"]');n.checked=r.showDyslexicStyles,n.addEventListener("click",(function(e){var r;t.updatePref("showDyslexicStyles",null===(r=e.target)||void 0===r?void 0:r.checked)})),performance.mark("Loaded settings")}},{key:"showPreferences",value:function(e){var t,r;e?null===(t=this.preferenceForm)||void 0===t||t.classList.remove("hide"):null===(r=this.preferenceForm)||void 0===r||r.classList.add("hide")}},{key:"enableStyles",value:function(e,t){document.getElementById(e).disabled=!t}}])&&t(c.prototype,o),a&&t(c,a),i}();(i=s||(s={})).DYSLEXIC_STYLES="DyslexicStyles",i.ENHANCED_STYLES="EnhancedStyles",window.onload=function(){performance.mark("Start app"),console.log("You're running JavaScript... let's have some fun!");new c}}();